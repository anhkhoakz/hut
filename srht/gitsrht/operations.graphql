query repositoryIDByName($name: String!) {
    repositoryByName(name: $name) {
        id
    }
}

query listArtifacts($name: String!) {
    repositoryByName(name: $name) {
        references {
            results {
                name
                artifacts {
                    results {
                        id
                        filename
                    }
                }
            }
        }
    }
}

query repositories {
    repositories {
        ...repos
    }
}

query repositoriesByUser($username: String!) {
    user(username: $username) {
        repositories {
            ...repos
        }
    }
}

fragment repos on RepositoryCursor {
    results {
        id
        name
        description
        visibility
    }
}

query sshSettings {
    version {
        settings {
            sshUser
        }
    }
}

query repoNames {
    repositories {
        results {
            name
        }
    }
}

query revsByRepoName($name: String!) {
    repositoryByName(name: $name) {
        references {
            results {
                name
            }
        }
    }
}

query aclByRepoName($name: String!) {
    repositoryByName(name: $name) {
        accessControlList {
            results {
                id
                created
                entity {
                    canonicalName
                }
                mode
            }
        }
    }
}

mutation uploadArtifact($repoId: Int!, $revspec: String!, $file: Upload!) {
    uploadArtifact(repoId: $repoId, revspec: $revspec, file: $file) {
        filename
    }
}

mutation deleteArtifact($id: Int!) {
    deleteArtifact(id: $id) {
        filename
    }
}

mutation createRepository(
    $name: String!
    $visibility: Visibility!
    $description: String!
) {
    createRepository(
        name: $name
        visibility: $visibility
        description: $description
    ) {
        owner {
            canonicalName
        }
        name
    }
}

mutation deleteRepository($id: Int!) {
    deleteRepository(id: $id) {
        name
    }
}
