// Code generated by gqlclientgen - DO NOT EDIT

package pastesrht

import (
	"context"
	gqlclient "git.sr.ht/~emersion/gqlclient"
	"time"
)

type AccessKind string

const (
	AccessKindRo AccessKind = "RO"
	AccessKindRw AccessKind = "RW"
)

type AccessScope string

const (
	AccessScopeProfile AccessScope = "PROFILE"
	AccessScopePastes  AccessScope = "PASTES"
)

type Cursor string

type Entity struct {
	Id            int32       `json:"id"`
	Created       time.Time   `json:"created"`
	CanonicalName string      `json:"canonicalName"`
	Pastes        PasteCursor `json:"pastes"`
}

type File struct {
	Filename *string `json:"filename,omitempty"`
	Hash     string  `json:"hash"`
	Contents URL     `json:"contents"`
}

type Paste struct {
	Id         string     `json:"id"`
	Created    time.Time  `json:"created"`
	Visibility Visibility `json:"visibility"`
	Files      []*File    `json:"files"`
	User       Entity     `json:"user"`
}

type PasteCursor struct {
	Results []Paste `json:"results"`
	Cursor  *Cursor `json:"cursor,omitempty"`
}

type URL string

type User struct {
	Id            int32       `json:"id"`
	Created       time.Time   `json:"created"`
	CanonicalName string      `json:"canonicalName"`
	Pastes        PasteCursor `json:"pastes"`
	Username      string      `json:"username"`
}

type Version struct {
	Major           int32     `json:"major"`
	Minor           int32     `json:"minor"`
	Patch           int32     `json:"patch"`
	DeprecationDate time.Time `json:"deprecationDate,omitempty"`
}

type Visibility string

const (
	VisibilityPublic   Visibility = "PUBLIC"
	VisibilityUnlisted Visibility = "UNLISTED"
	VisibilityPrivate  Visibility = "PRIVATE"
)

func CreatePaste(client *gqlclient.Client, ctx context.Context, files []gqlclient.Upload) (create Paste, err error) {
	op := gqlclient.NewOperation("mutation createPaste ($files: [Upload!]!) {\n\tcreate(files: $files, visibility: UNLISTED) {\n\t\tid\n\t\tuser {\n\t\t\tcanonicalName\n\t\t}\n\t}\n}\n")
	op.Var("files", files)
	var respData struct {
		Create Paste
	}
	err = client.Execute(ctx, op, &respData)
	return respData.Create, err
}
